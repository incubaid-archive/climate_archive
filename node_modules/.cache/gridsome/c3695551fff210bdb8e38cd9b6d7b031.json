{"remainingRequest":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js??ref--1-1!/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/directives/image.js","dependencies":[{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/directives/image.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import caniuse from '../utils/caniuse';\nimport { addClass, removeClass } from '../utils/class';\nimport { createObserver } from '../utils/intersectionObserver';\nconst observer = caniuse.IntersectionObserver ? createObserver(intersectionHandler) : null;\nexport default {\n  inserted(el) {\n    observe(el);\n  },\n\n  update(el) {\n    observe(el);\n  },\n\n  unbind(el) {\n    unobserve(el);\n  }\n\n};\n\nfunction intersectionHandler({\n  intersectionRatio,\n  target\n}) {\n  if (intersectionRatio > 0) {\n    observer.unobserve(target);\n    loadImage(target);\n  }\n}\n\nfunction observe(el) {\n  if (el.tagName !== 'IMG') {\n    observeHtml(el);\n  } else {\n    if (!observer) loadImage(el);else observer.observe(el);\n  }\n}\n\nfunction unobserve(el) {\n  if (el.tagName !== 'IMG') {\n    unobserveHtml(el);\n  } else if (observer) {\n    observer.unobserve(el);\n  }\n}\n\nfunction observeHtml(context = document) {\n  const images = context.querySelectorAll('[data-src]');\n\n  if (observer) {\n    images.forEach(el => !el.__vue__ && observer.observe(el));\n  } else {\n    Array.from(images).forEach(el => !el.__vue__ && loadImage(el));\n  }\n}\n\nfunction unobserveHtml(context = document) {\n  if (observer) {\n    context.querySelectorAll('[data-src]').forEach(el => {\n      if (!el.__vue__) observer.unobserve(el);\n    });\n  }\n}\n\nfunction loadImage(el) {\n  const src = el.getAttribute('data-src');\n  const sizes = el.getAttribute('data-sizes');\n  const srcset = el.getAttribute('data-srcset');\n\n  if (!src || el.src.endsWith(src)) {\n    return; // src is already switched\n  }\n\n  el.onload = () => {\n    removeClass(el, 'g-image--loading');\n    addClass(el, 'g-image--loaded');\n  };\n\n  el.srcset = srcset;\n  el.sizes = sizes;\n  el.src = src;\n}",{"version":3,"names":["caniuse","addClass","removeClass","createObserver","observer","IntersectionObserver","intersectionHandler","inserted","el","observe","update","unbind","unobserve","intersectionRatio","target","loadImage","tagName","observeHtml","unobserveHtml","context","document","images","querySelectorAll","forEach","__vue__","Array","from","src","getAttribute","sizes","srcset","endsWith","onload"],"sources":["/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/directives/image.js"],"sourcesContent":["import caniuse from '../utils/caniuse'\nimport { addClass, removeClass } from '../utils/class'\nimport { createObserver } from '../utils/intersectionObserver'\n\nconst observer = caniuse.IntersectionObserver\n  ? createObserver(intersectionHandler)\n  : null\n\nexport default {\n  inserted (el) {\n    observe(el)\n  },\n  update (el) {\n    observe(el)\n  },\n  unbind (el) {\n    unobserve(el)\n  }\n}\n\nfunction intersectionHandler ({ intersectionRatio, target }) {\n  if (intersectionRatio > 0) {\n    observer.unobserve(target)\n    loadImage(target)\n  }\n}\n\nfunction observe (el) {\n  if (el.tagName !== 'IMG') {\n    observeHtml(el)\n  } else {\n    if (!observer) loadImage(el)\n    else observer.observe(el)\n  }\n}\n\nfunction unobserve (el) {\n  if (el.tagName !== 'IMG') {\n    unobserveHtml(el)\n  } else if (observer) {\n    observer.unobserve(el)\n  }\n}\n\nfunction observeHtml (context = document) {\n  const images = context.querySelectorAll('[data-src]')\n\n  if (observer) {\n    images.forEach(el => !el.__vue__ && observer.observe(el))\n  } else {\n    Array.from(images).forEach(el => !el.__vue__ && loadImage(el))\n  }\n}\n\nfunction unobserveHtml (context = document) {\n  if (observer) {\n    context.querySelectorAll('[data-src]').forEach(el => {\n      if (!el.__vue__) observer.unobserve(el)\n    })\n  }\n}\n\nfunction loadImage (el) {\n  const src = el.getAttribute('data-src')\n  const sizes = el.getAttribute('data-sizes')\n  const srcset = el.getAttribute('data-srcset')\n\n  if (!src || el.src.endsWith(src)) {\n    return // src is already switched\n  }\n\n  el.onload = () => {\n    removeClass(el, 'g-image--loading')\n    addClass(el, 'g-image--loaded')\n  }\n\n  el.srcset = srcset\n  el.sizes = sizes\n  el.src = src\n}\n"],"mappings":"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"}]}