{"remainingRequest":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js??ref--1-1!/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/src/pages/Blog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/src/pages/Blog.vue","mtime":1658143774000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es.error.cause.js\";\nimport PostListItem from \"~/components/custom/Cards/PostListItem.vue\";\nimport Pagination from \"~/components/custom/Pagination.vue\";\nimport NewsFilterHeader from \"~/components/custom/NewsFilterHeader.vue\";\nexport default {\n  data() {\n    const allMonths = [\"All Months\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    const currYear = new Date().getFullYear();\n    var years = [\"All Years\"];\n    var r = this.range(2019, currYear);\n    r.forEach(year => years.push(String(year)));\n    return {\n      selectedTopic: \"All Topics\",\n      selectedYear: \"All Years\",\n      selectedMonth: \"All Months\",\n      months: allMonths,\n      years: years,\n      listArchive: false,\n      archiveButtonText: \"Archive\"\n    };\n  },\n\n  metaInfo: {\n    title: \"Blog\"\n  },\n  components: {\n    PostListItem,\n    Pagination,\n    NewsFilterHeader\n  },\n  methods: {\n    setTopic: function (topic) {\n      this.selectedTopic = topic;\n    },\n\n    setYear(year) {\n      this.selectedYear = year;\n    },\n\n    setMonth(month) {\n      this.selectedMonth = month;\n    },\n\n    resetAll() {\n      this.selectedTopic = \"All Topics\";\n      this.selectedYear = \"All Years\";\n      this.selectedMonth = \"All Months\";\n    },\n\n    range(start, end, step) {\n      var range = [];\n      var typeofStart = typeof start;\n      var typeofEnd = typeof end;\n\n      if (step === 0) {\n        throw TypeError(\"Step cannot be zero.\");\n      }\n\n      if (typeofStart == \"undefined\" || typeofEnd == \"undefined\") {\n        throw TypeError(\"Must pass start and end arguments.\");\n      } else if (typeofStart != typeofEnd) {\n        throw TypeError(\"Start and end arguments must be of same type.\");\n      }\n\n      typeof step == \"undefined\" && (step = 1);\n\n      if (end < start) {\n        step = -step;\n      }\n\n      if (typeofStart == \"number\") {\n        while (step > 0 ? end >= start : end <= start) {\n          range.push(start);\n          start += step;\n        }\n      } else if (typeofStart == \"string\") {\n        if (start.length != 1 || end.length != 1) {\n          throw TypeError(\"Only strings with one character are supported.\");\n        }\n\n        start = start.charCodeAt(0);\n        end = end.charCodeAt(0);\n\n        while (step > 0 ? end >= start : end <= start) {\n          range.push(String.fromCharCode(start));\n          start += step;\n        }\n      } else {\n        throw TypeError(\"Only string and number types are supported\");\n      }\n\n      return range;\n    }\n\n  },\n  computed: {\n    topics: function () {\n      var res = [\"All Topics\"];\n      this.$page.topics.edges.forEach(edge => res.push(edge.node.title));\n      return res;\n    },\n\n    contentHeight() {\n      if (process.isClient) {\n        return window.innerHeight - 100;\n      }\n    },\n\n    blogs() {\n      var res = {};\n      var old = this.$page.entries;\n      res.totalCount = old.totalCount;\n      res.pageInfo = old.pageInfo;\n      res.edges = [];\n\n      for (var i = 0; i < old.edges.length; i++) {\n        var node = old.edges[i].node; // Now check topic\n\n        var topics = [\"All Topics\"];\n        node.tags.forEach(tag => topics.push(tag.title));\n        var nodeDate = new Date(node.datetime);\n        if (!topics.includes(this.selectedTopic)) continue; // Check year\n\n        var years = [\"All Years\", String(nodeDate.getFullYear())];\n        if (!years.includes(this.selectedYear)) continue; // Check Month\n\n        var months = [\"All Months\", this.months[nodeDate.getMonth() + 1]];\n        if (!months.includes(this.selectedMonth)) continue;\n        res.edges.push({\n          node: node,\n          id: node.id\n        });\n      }\n\n      return res;\n    },\n\n    baseurl() {\n      return \"/blog/\";\n    }\n\n  }\n};",{"version":3,"mappings":";AAkFA;AACA;AACA;AAEA;EACAA;IACA,mBACA,YADA,EAEA,SAFA,EAGA,UAHA,EAIA,OAJA,EAKA,OALA,EAMA,KANA,EAOA,MAPA,EAQA,MARA,EASA,QATA,EAUA,WAVA,EAWA,SAXA,EAYA,UAZA,EAaA,UAbA;IAeA;IACA;IACA;IACAC;IAEA;MACAC,2BADA;MAEAC,yBAFA;MAGAC,2BAHA;MAIAC,iBAJA;MAKAC,YALA;MAMAC,kBANA;MAOAC;IAPA;EASA,CA/BA;;EAiCAC;IACAC;EADA,CAjCA;EAoCAC;IACAC,YADA;IAEAC,UAFA;IAGAC;EAHA,CApCA;EAyCAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACA;IACA,CATA;;IAUAC;MACA;MACA;MACA;IACA,CAdA;;IAeAC;MACA;MACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MAEA;;MAEA;QACAC;MACA;;MAEA;QACA;UACAD;UACAE;QACA;MACA,CALA,MAKA;QACA;UACA;QACA;;QAEAA;QACAC;;QAEA;UACAH;UACAE;QACA;MACA,CAZA,MAYA;QACA;MACA;;MAEA;IACA;;EA1DA,CAzCA;EAqGAE;IACAC;MACA;MACA;MACA;IACA,CALA;;IAMAC;MACA;QACA;MACA;IACA,CAVA;;IAYAC;MACA;MACA;MACAC;MACAA;MACAA;;MAEA;QACA,6BADA,CAGA;;QACA;QACAC;QAEA;QACA,mDARA,CAUA;;QACA;QAEA,iDAbA,CAeA;;QACA;QACA;QACAD;UAAAC;UAAAC;QAAA;MACA;;MACA;IACA,CAxCA;;IAyCAC;MACA;IACA;;EA3CA;AArGA","names":["data","r","selectedTopic","selectedYear","selectedMonth","months","years","listArchive","archiveButtonText","metaInfo","title","components","PostListItem","Pagination","NewsFilterHeader","methods","setTopic","setYear","setMonth","resetAll","range","step","start","end","computed","topics","contentHeight","blogs","res","node","id","baseurl"],"sourceRoot":"src/pages","sources":["Blog.vue"],"sourcesContent":["<template>\r\n  <Layout>\r\n    <NewsFilterHeader\r\n      @selectedTopic=\"setTopic\"\r\n      @selectedYear=\"setYear\"\r\n      @selectedMonth=\"setMonth\"\r\n      @resetAll=\"resetAll\"\r\n      :topics=\"topics\"\r\n      :years=\"years\"\r\n      :months=\"months\"\r\n    />\r\n    <div\r\n      class=\"container sm:pxi-0 mx-auto mt-8\"\r\n      :style=\"{ 'min-height': contentHeight + 'px' }\"\r\n    >\r\n      <div class=\"flex flex-wrap news pt-12 mt-8 pb-8 mx-4 sm:-mx-4\">\r\n        <PostListItem\r\n          v-for=\"post in blogs.edges\"\r\n          :key=\"post.node.id\"\r\n          :record=\"post.node\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"pagination flex justify-center mb-8\">\r\n        <Pagination\r\n          :baseUrl=\"baseurl\"\r\n          :currentPage=\"blogs.pageInfo.currentPage\"\r\n          :totalPages=\"blogs.pageInfo.totalPages\"\r\n          :maxVisibleButtons=\"5\"\r\n          v-if=\"blogs.pageInfo.totalPages > 1 && blogs.edges.length > 0\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </Layout>\r\n</template>\r\n<page-query>\r\n\r\nquery($page: Int){\r\n  entries: allBlog(perPage: 10, page: $page, sortBy: \"created\", order: DESC, filter: {category: { id: {in: [\"farming\"]}}}) @paginate{\r\n    totalCount\r\n    pageInfo {\r\n      totalPages\r\n      currentPage\r\n    }\r\n    edges {\r\n      node {\r\n        title\r\n        tags{\r\n          id\r\n          title\r\n          path\r\n        }\r\n        excerpt\r\n        category{\r\n          id\r\n          title\r\n        }\r\n        image(width:800)\r\n        path\r\n        humanTime : created(format:\"DD MMM YYYY\")\r\n        datetime : created\r\n        authors {\r\n          id\r\n          name\r\n          image(width:64, height:64, fit:inside)\r\n          path\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n   topics:  allBlogTag{\r\n    edges{\r\n      node{\r\n\t\t\t\ttitle        \r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</page-query>\r\n<script>\r\nimport PostListItem from \"~/components/custom/Cards/PostListItem.vue\";\r\nimport Pagination from \"~/components/custom/Pagination.vue\";\r\nimport NewsFilterHeader from \"~/components/custom/NewsFilterHeader.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    const allMonths = [\r\n      \"All Months\",\r\n      \"January\",\r\n      \"February\",\r\n      \"March\",\r\n      \"April\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"August\",\r\n      \"September\",\r\n      \"October\",\r\n      \"November\",\r\n      \"December\",\r\n    ];\r\n    const currYear = new Date().getFullYear();\r\n    var years = [\"All Years\"];\r\n    var r = this.range(2019, currYear);\r\n    r.forEach((year) => years.push(String(year)));\r\n\r\n    return {\r\n      selectedTopic: \"All Topics\",\r\n      selectedYear: \"All Years\",\r\n      selectedMonth: \"All Months\",\r\n      months: allMonths,\r\n      years: years,\r\n      listArchive: false,\r\n      archiveButtonText: \"Archive\",\r\n    };\r\n  },\r\n\r\n  metaInfo: {\r\n    title: \"Blog\",\r\n  },\r\n  components: {\r\n    PostListItem,\r\n    Pagination,\r\n    NewsFilterHeader,\r\n  },\r\n  methods: {\r\n    setTopic: function (topic) {\r\n      this.selectedTopic = topic;\r\n    },\r\n    setYear(year) {\r\n      this.selectedYear = year;\r\n    },\r\n    setMonth(month) {\r\n      this.selectedMonth = month;\r\n    },\r\n    resetAll() {\r\n      this.selectedTopic = \"All Topics\";\r\n      this.selectedYear = \"All Years\";\r\n      this.selectedMonth = \"All Months\";\r\n    },\r\n    range(start, end, step) {\r\n      var range = [];\r\n      var typeofStart = typeof start;\r\n      var typeofEnd = typeof end;\r\n\r\n      if (step === 0) {\r\n        throw TypeError(\"Step cannot be zero.\");\r\n      }\r\n\r\n      if (typeofStart == \"undefined\" || typeofEnd == \"undefined\") {\r\n        throw TypeError(\"Must pass start and end arguments.\");\r\n      } else if (typeofStart != typeofEnd) {\r\n        throw TypeError(\"Start and end arguments must be of same type.\");\r\n      }\r\n\r\n      typeof step == \"undefined\" && (step = 1);\r\n\r\n      if (end < start) {\r\n        step = -step;\r\n      }\r\n\r\n      if (typeofStart == \"number\") {\r\n        while (step > 0 ? end >= start : end <= start) {\r\n          range.push(start);\r\n          start += step;\r\n        }\r\n      } else if (typeofStart == \"string\") {\r\n        if (start.length != 1 || end.length != 1) {\r\n          throw TypeError(\"Only strings with one character are supported.\");\r\n        }\r\n\r\n        start = start.charCodeAt(0);\r\n        end = end.charCodeAt(0);\r\n\r\n        while (step > 0 ? end >= start : end <= start) {\r\n          range.push(String.fromCharCode(start));\r\n          start += step;\r\n        }\r\n      } else {\r\n        throw TypeError(\"Only string and number types are supported\");\r\n      }\r\n\r\n      return range;\r\n    },\r\n  },\r\n  computed: {\r\n    topics: function () {\r\n      var res = [\"All Topics\"];\r\n      this.$page.topics.edges.forEach((edge) => res.push(edge.node.title));\r\n      return res;\r\n    },\r\n    contentHeight() {\r\n      if (process.isClient) {\r\n        return window.innerHeight - 100;\r\n      }\r\n    },\r\n\r\n    blogs() {\r\n      var res = {};\r\n      var old = this.$page.entries;\r\n      res.totalCount = old.totalCount;\r\n      res.pageInfo = old.pageInfo;\r\n      res.edges = [];\r\n\r\n      for (var i = 0; i < old.edges.length; i++) {\r\n        var node = old.edges[i].node;\r\n\r\n        // Now check topic\r\n        var topics = [\"All Topics\"];\r\n        node.tags.forEach((tag) => topics.push(tag.title));\r\n\r\n        var nodeDate = new Date(node.datetime);\r\n        if (!topics.includes(this.selectedTopic)) continue;\r\n\r\n        // Check year\r\n        var years = [\"All Years\", String(nodeDate.getFullYear())];\r\n\r\n        if (!years.includes(this.selectedYear)) continue;\r\n\r\n        // Check Month\r\n        var months = [\"All Months\", this.months[nodeDate.getMonth() + 1]];\r\n        if (!months.includes(this.selectedMonth)) continue;\r\n        res.edges.push({ node: node, id: node.id });\r\n      }\r\n      return res;\r\n    },\r\n    baseurl() {\r\n      return \"/blog/\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}