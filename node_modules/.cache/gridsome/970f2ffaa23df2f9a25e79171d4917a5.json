{"remainingRequest":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js??ref--1-1!/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/entry.sockjs.js","dependencies":[{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/entry.sockjs.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import fetch from './fetch';\nimport router from './router';\nimport SockJS from 'sockjs-client';\nimport { formatError, clearAllResults, setResults } from './graphql/shared';\nconst sock = new SockJS(process.env.SOCKJS_ENDPOINT);\n\nsock.onmessage = message => {\n  const data = JSON.parse(message.data);\n\n  switch (data.type) {\n    case 'fetch':\n      fetch(router.currentRoute, {\n        force: true\n      }).then(res => {\n        if (res.errors) {\n          formatError(res.errors[0], router.currentRoute);\n        } else {\n          clearAllResults(router.currentRoute.path);\n          setResults(router.currentRoute.path, res);\n        }\n      }).catch(err => formatError(err, router.currentRoute));\n      break;\n  }\n};",{"version":3,"names":["fetch","router","SockJS","formatError","clearAllResults","setResults","sock","process","env","SOCKJS_ENDPOINT","onmessage","message","data","JSON","parse","type","currentRoute","force","then","res","errors","path","catch","err"],"sources":["/home/ehab/codewww/github/threefoldfoundation/www_climate_action_project/node_modules/gridsome/app/entry.sockjs.js"],"sourcesContent":["import fetch from './fetch'\nimport router from './router'\nimport SockJS from 'sockjs-client'\nimport { formatError, clearAllResults, setResults } from './graphql/shared'\n\nconst sock = new SockJS(process.env.SOCKJS_ENDPOINT)\n\nsock.onmessage = message => {\n  const data = JSON.parse(message.data)\n\n  switch (data.type) {\n    case 'fetch':\n      fetch(router.currentRoute, { force: true })\n        .then(res => {\n          if (res.errors) {\n            formatError(res.errors[0], router.currentRoute)\n          } else {\n            clearAllResults(router.currentRoute.path)\n            setResults(router.currentRoute.path, res)\n          }\n        })\n        .catch(err => formatError(err, router.currentRoute))\n\n      break\n  }\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,WAAT,EAAsBC,eAAtB,EAAuCC,UAAvC,QAAyD,kBAAzD;AAEA,MAAMC,IAAI,GAAG,IAAIJ,MAAJ,CAAWK,OAAO,CAACC,GAAR,CAAYC,eAAvB,CAAb;;AAEAH,IAAI,CAACI,SAAL,GAAiBC,OAAO,IAAI;EAC1B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACC,IAAnB,CAAb;;EAEA,QAAQA,IAAI,CAACG,IAAb;IACE,KAAK,OAAL;MACEf,KAAK,CAACC,MAAM,CAACe,YAAR,EAAsB;QAAEC,KAAK,EAAE;MAAT,CAAtB,CAAL,CACGC,IADH,CACQC,GAAG,IAAI;QACX,IAAIA,GAAG,CAACC,MAAR,EAAgB;UACdjB,WAAW,CAACgB,GAAG,CAACC,MAAJ,CAAW,CAAX,CAAD,EAAgBnB,MAAM,CAACe,YAAvB,CAAX;QACD,CAFD,MAEO;UACLZ,eAAe,CAACH,MAAM,CAACe,YAAP,CAAoBK,IAArB,CAAf;UACAhB,UAAU,CAACJ,MAAM,CAACe,YAAP,CAAoBK,IAArB,EAA2BF,GAA3B,CAAV;QACD;MACF,CARH,EASGG,KATH,CASSC,GAAG,IAAIpB,WAAW,CAACoB,GAAD,EAAMtB,MAAM,CAACe,YAAb,CAT3B;MAWA;EAbJ;AAeD,CAlBD"}]}